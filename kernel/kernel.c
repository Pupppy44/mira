#include "inc/idt.h"

extern int ms_entry();

// Mira Kernel Entry
int mk_entry() {    
    mk_util_clear_screen();

    ms_entry();

    unsigned char shellcode1[] = { 0xC6, 0x04, 0x25, 0x02, 0x80, 0x0B, 0x00, 0x5A, 0xC6, 0x04, 0x25, 0x03, 0x80, 0x0B, 0x00, 0x05 };
    unsigned char shellcode2[] = { 0xC6, 0x04, 0x25, 0x04, 0x80, 0x0B, 0x00, 0x45, 0xC6, 0x04, 0x25, 0x05, 0x80, 0x0B, 0x00, 0x04 };
    unsigned char shellcode3[] = { 0xC6, 0x04, 0x25, 0x06, 0x80, 0x0B, 0x00, 0x51, 0xC6, 0x04, 0x25, 0x07, 0x80, 0x0B, 0x00, 0x03 };
    unsigned char shellcode4[] = { 0xC6, 0x04, 0x25, 0x08, 0x80, 0x0B, 0x00, 0x5A, 0xC6, 0x04, 0x25, 0x09, 0x80, 0x0B, 0x00, 0x03 };

    mk_create_task(shellcode1, sizeof(shellcode1));
    mk_create_task(shellcode2, sizeof(shellcode2));
    mk_create_task(shellcode3, sizeof(shellcode3));
    mk_create_task(shellcode4, sizeof(shellcode4));

    mk_idt_init();
    mk_pit_init();

    while (1);

    return 0;
}